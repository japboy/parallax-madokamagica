/**
 * File built with Cakefile at 2012-11-03T13:06:34+09:00
 */
(function(){var e,t,n,r=[].slice;t=["http://www.madoka-magica.com/common/img/header.png"],n=["http://www.madoka-magica.com/tv/special/yokokugallery/img/01.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/02.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/03.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/04.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/05.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/06.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/07.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/08.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/09.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/10.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/11.jpg","http://www.madoka-magica.com/tv/special/yokokugallery/img/12.jpg"],e=jQuery,e.extend({preloadByDOM:function(t){var n,r,i,s,o,u;i=[],s=function(t,n){return e("<img/>").attr("src",t).on("error",function(r){return e(this).remove(),n.reject(t)}).on("load",function(r){return e(this).remove(),n.notify(t),n.resolve(t)})};for(o=0,u=t.length;o<u;o++)r=t[o],n=e.Deferred(),i.push(n),s(r,n);return i}}),e(function(){var i,s,o,u,a,f,l,c;return o=e(window),i=e(document),s=e("#main"),l=function(){var t,n,r,i,s;n=e("#loader"),r=e("#text"),t=e("#bar");if(0===t.length||0===r.length)r=e("<p/>"),t=e("<div/>"),r.attr({id:"text","data-status":"0 %"}).appendTo(n),t.attr({id:"bar","data-progress":0}).appendTo(n);return i=function(){return r.text(r.data("status")),t.css({width:""+t.data("progress")+"%"},{duration:"fast"})},s={error:function(e){return console.log(e),r.data("status",e),i()},update:function(e){return r.data("status",""+Math.round(e)+" %"),t.data("progress",e),i()},destroy:function(){return n.remove()}},s}(),f=function(){var e,t,n,i,s,o;t=1<=arguments.length?r.call(arguments,0):[],i=100/t.length,n=0;for(s=0,o=t.length;s<o;s++)e=t[s],void 0!==e&&(n+=i);return l.update(n)},a=function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],l.error("Error occured.")},u=function(t,n){var r,u,a,f,c,h,p,d,v,m;l.destroy(),s.css({height:""+n.length*100+"%"}),u=e("<h1/>"),a=e("<img/>"),a.attr({src:t,alt:"魔法少女まどか☆マギカ"}).appendTo(u),u.attr({id:"title"}).appendTo(s);for(c=v=0,m=n.length;v<m;c=++v)h=n[c],r=e("<div/>"),r.addClass("image").attr({id:c,"data-scale":1.1}).css({backgroundImage:"url("+h+")",backgroundSize:""+r.data("scale")*100+"%"}),s.append(r);return f=e("#title"),d=f.offset().top,p=f.height(),e(window).on("scroll",function(e){var t,n;return t=i.height()/(o.height()/3),n=20+o.scrollTop()/t,f.css({bottom:""+n+"px"})}),e(".image").each(function(t){var n,r,i,s;return n=e(this),i=n.offset().top,r=n.height(),s=n.data("scale"),e(window).on("scroll",function(e){var t,u,a,f,l;l=o.scrollTop()+o.height(),f=i+r;if(l>i&&f>o.scrollTop())return u=(r*s-r)/2*-1,t=o.scrollTop()-i,a=t/8*-1,n.css({backgroundPosition:"50% "+(u+a)+"px"})})})},c=e.preloadByDOM(n),e.when.apply(this,c).progress(f).fail(a).done(function(){var n,i;return i=1<=arguments.length?r.call(arguments,0):[],n=e.preloadByDOM(t),e.when.apply(this,n).fail(a).done(function(){var e,t;return t=1<=arguments.length?r.call(arguments,0):[],e=t[0],u(e,i)})})})}).call(this)